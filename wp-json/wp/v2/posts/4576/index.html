{"id":4576,"date":"2024-04-17T10:43:57","date_gmt":"2024-04-17T05:13:57","guid":{"rendered":"https:\/\/specmatic.dvox.biz\/?p=4576"},"modified":"2024-04-18T06:19:05","modified_gmt":"2024-04-18T00:49:05","slug":"contract-testing-google-pub-sub-using-asyncapi-as-executable-contracts","status":"publish","type":"post","link":"https:\/\/specmatic.dvox.biz\/updates\/contract-testing-google-pub-sub-using-asyncapi-as-executable-contracts\/","title":{"rendered":"Contract Testing Google Pub\/Sub: Using AsyncAPI specs as Executable Contracts"},"content":{"rendered":"\n<figure class=\"wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio\"><div class=\"wp-block-embed__wrapper\">\n<div class=\"ast-oembed-container \" style=\"height: 100%;\"><iframe title=\"Contract Testing Google Pub\/Sub: Using AsyncAPI specs as Executable Contracts\" width=\"500\" height=\"281\" src=\"https:\/\/www.youtube.com\/embed\/cPXfZwHzkh8?feature=oembed\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen><\/iframe><\/div>\n<\/div><\/figure>\n\n\n\n<div style=\"height:40px\" aria-hidden=\"true\" class=\"wp-block-spacer\"><\/div>\n\n\n\n<h2 class=\"wp-block-heading has-text-align-left\"><strong>Shift-Left the identification of integration issues in applications built with Event Driven Architecture (EDA) by leveraging AsyncAPI specs as Executable Contracts<\/strong><\/h2>\n\n\n\n<h3 class=\"wp-block-heading\"><strong>Introduction<\/strong><\/h3>\n\n\n\n<p>The surge in popularity of microservices has revolutionized the way we think about software architecture. However, as systems grow and inter-service communication increases, the risk of integration issues can also rise. One such communication challenge appears when services interact through asynchronous messaging systems like Google Pub\/Sub. To ensure reliability and adherence to predefined protocols, contract testing emerges as a crucial strategy. In this blog post, we&#8217;ll dive deeper into how Specmatic simplifies contract testing for services dependent on Google Pub\/Sub, paving the way for faultless microservices communication through early identification of integration issues.<\/p>\n\n\n\n<p><span id=\"docs-internal-guid-d9d95dfb-7fff-d39e-a826-e835c7a111b4\"><span style=\"font-size: 11pt; font-family: Arial, sans-serif; color: rgb(0, 0, 0); background-color: transparent; font-variant-numeric: normal; font-variant-east-asian: normal; font-variant-alternates: normal; font-variant-position: normal; vertical-align: baseline;\"><strong>Github Repo:<\/strong> <a href=\"https:\/\/github.com\/znsio\/specmatic-google-pubsub-sample\">https:\/\/github.com\/znsio\/specmatic-google-pubsub-sample<\/a><\/span><\/span><\/p>\n\n\n\n<p>See other demos of Specmatic in action with AsyncAPI:<\/p>\n\n\n\n<p><a href=\"https:\/\/specmatic.in\/updates\/kafka-mocking-with-asyncapi-using-specmatic\/\">Kafka Mocking with AsyncAPI using Specmatic<br><\/a><a href=\"https:\/\/specmatic.in\/updates\/jms-mocking-with-asyncapi-using-specmatic\/\">JMS Mocking with AsyncAPI using Specmatic<\/a><\/p>\n\n\n\n<h3 class=\"wp-block-heading\"><strong>Understanding Google Pub\/Sub and Contract Testing<\/strong><\/h3>\n\n\n\n<p>Google Pub\/Sub is a fully-managed real-time messaging service that allows applications to exchange messages effectively. A common scenario entails a service publishing a message to a topic, and another subscribing to that topic to receive the message. The challenge lies in ensuring that both parties agree on the message format\u2014this is where contract testing comes into play.<\/p>\n\n\n\n<p>Contract testing verifies interaction between service providers and consumers, confirming each side adheres to the agreed-upon contract. Specmatic, a tool adept at managing contract tests, uses the AsyncAPI specification to automate these tests using the provided schema of messages.<\/p>\n\n\n\n<h3 class=\"wp-block-heading\"><strong>AsyncAPI Specifications and Specmatic<\/strong><\/h3>\n\n\n\n<p>The AsyncAPI specification acts as a blueprint for your messaging API, defining the message structure, protocols, and channels used for communication. It&#8217;s what Specmatic relies on to ensure your Google Pub\/Sub messages are both syntactically and functionally correct. Through the use of named examples within the AsyncAPI specification, Specmatic can publish and subscribe to messages, simulating the actions of actual services during the testing process.<\/p>\n\n\n\n<h3 class=\"wp-block-heading\"><strong>Utilizing the Google Pub\/Sub Emulator<\/strong><\/h3>\n\n\n\n<p>Instead of interacting with a live instance of Google Pub\/Sub, in this demo we opt for an emulator during testing. This approach accelerates the testing process and removes external dependencies, enabling local and CI pipeline-based executions that provide immediate feedback.<\/p>\n\n\n\n<figure class=\"wp-block-image size-full\"><img fetchpriority=\"high\" decoding=\"async\" width=\"1280\" height=\"303\" src=\"https:\/\/specmatic.dvox.biz\/wp-content\/uploads\/2024\/04\/PubSub-CI.jpg\" alt=\"\" class=\"wp-image-4585\" srcset=\"https:\/\/specmatic.dvox.biz\/wp-content\/uploads\/2024\/04\/PubSub-CI.jpg 1280w, https:\/\/specmatic.dvox.biz\/wp-content\/uploads\/2024\/04\/PubSub-CI-300x71.jpg 300w, https:\/\/specmatic.dvox.biz\/wp-content\/uploads\/2024\/04\/PubSub-CI-1024x242.jpg 1024w, https:\/\/specmatic.dvox.biz\/wp-content\/uploads\/2024\/04\/PubSub-CI-768x182.jpg 768w\" sizes=\"(max-width: 1280px) 100vw, 1280px\" \/><figcaption class=\"wp-element-caption\">Specmatic Contract Test running as part of Github Action<\/figcaption><\/figure>\n\n\n\n<h3 class=\"wp-block-heading\"><strong>Automating with Specmatic<\/strong><\/h3>\n\n\n\n<p>In this demonstration of Specmatic\u2019s capabilities, we see how Specmatic operates as an intelligent client for microservices. It sends messages and validates both the presence and correctness of the responses it receives. If requirements aren&#8217;t met, Specmatic flags the test as a failure, alerting developers to discrepancies between the service and the contract.<\/p>\n\n\n\n<h3 class=\"wp-block-heading\"><strong>The Construction of a Contract Test with Specmatic<\/strong><\/h3>\n\n\n\n<p>Constructing contract tests with Specmatic begins by pointing to the AsyncAPI specification within the `specmatic.json` file. Doing so allows Specmatic to generate tests automatically, fostering a seamless integration process.<\/p>\n\n\n\n<h3 class=\"wp-block-heading\"><strong>The Value of Specmatic Testing<\/strong><\/h3>\n\n\n\n<p>This testing approach facilitated by Specmatic offers a proactive measure for preventing integrations veering off-spec. The demonstration showcases a scenario where deliberately deviating from the AsyncAPI specification causes the contract test to fail. This illustrates Specmatic&#8217;s ability to catch errors early, preventing potential bugs from progressing down the deployment pipeline.<\/p>\n\n\n\n<h3 class=\"wp-block-heading\"><strong>Specmatic&#8217;s Role in Maintaining Contract Integrity<\/strong><\/h3>\n\n\n\n<p>Specmatic also ensures consistency across examples used within the AsyncAPI specification, associating messages across publish and subscribe operations via common naming conventions. This feature solidifies the link between message expectations, ensuring that changes in one area of the specification are consistently replicated throughout.<\/p>\n\n\n\n<h3 class=\"wp-block-heading\"><strong>Collaborative and Efficient Development<\/strong><\/h3>\n\n\n\n<p>Specmatic\u2019s approach of treating AsyncAPI spec as the source of truth for the mutual agreement between microservice teams fosters a collaborative culture where all stakeholder teams can co-create how services interact with each other through asynchronous channels and capture the same as AsyncAPI spec in an iterative manner. This also allows for independent parallel development where teams can confidently build their respective components since Specmatic will ensure contract compatibility of services based on the AsyncAPI spec.<\/p>\n\n\n\n<h3 class=\"wp-block-heading\"><strong>Conclusion<\/strong><\/h3>\n\n\n\n<p>As services and their communication evolve, Specmatic&#8217;s approach to contract testing offers a scalable, efficient, and secure method for ensuring that all messages pass seamlessly between services, keeping the system in harmony. By automating contract tests utilizing the AsyncAPI specification to test Google Pub\/Sub integrations, Specmatic allows developers to confidently build and maintain systems that are robust, reliable, and ready to communicate effectively. This exemplifies how automating and aligning software development practices with contract testing can vastly improve the overall software delivery lifecycle.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Shift-Left the identification of integration issues in applications built with Event Driven Architecture (EDA) by leveraging AsyncAPI specs as Executable Contracts Introduction The surge in popularity of microservices has revolutionized the way we think about software architecture. However, as systems grow and inter-service communication increases, the risk of integration issues can also rise. One such [&hellip;]<\/p>\n","protected":false},"author":9,"featured_media":4577,"comment_status":"closed","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_seopress_robots_primary_cat":"none","_seopress_titles_title":"","_seopress_titles_desc":"","_seopress_robots_index":"","_uag_custom_page_level_css":"","site-sidebar-layout":"default","site-content-layout":"","ast-site-content-layout":"default","site-content-style":"default","site-sidebar-style":"default","ast-global-header-display":"","ast-banner-title-visibility":"","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"disabled","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":"","astra-migrate-meta-layouts":"set","ast-page-background-enabled":"default","ast-page-background-meta":{"desktop":{"background-color":"var(--ast-global-color-4)","background-image":"","background-repeat":"repeat","background-position":"center center","background-size":"auto","background-attachment":"scroll","background-type":"","background-media":"","overlay-type":"","overlay-color":"","overlay-opacity":"","overlay-gradient":""},"tablet":{"background-color":"","background-image":"","background-repeat":"repeat","background-position":"center center","background-size":"auto","background-attachment":"scroll","background-type":"","background-media":"","overlay-type":"","overlay-color":"","overlay-opacity":"","overlay-gradient":""},"mobile":{"background-color":"","background-image":"","background-repeat":"repeat","background-position":"center center","background-size":"auto","background-attachment":"scroll","background-type":"","background-media":"","overlay-type":"","overlay-color":"","overlay-opacity":"","overlay-gradient":""}},"ast-content-background-meta":{"desktop":{"background-color":"var(--ast-global-color-5)","background-image":"","background-repeat":"repeat","background-position":"center center","background-size":"auto","background-attachment":"scroll","background-type":"","background-media":"","overlay-type":"","overlay-color":"","overlay-opacity":"","overlay-gradient":""},"tablet":{"background-color":"var(--ast-global-color-5)","background-image":"","background-repeat":"repeat","background-position":"center center","background-size":"auto","background-attachment":"scroll","background-type":"","background-media":"","overlay-type":"","overlay-color":"","overlay-opacity":"","overlay-gradient":""},"mobile":{"background-color":"var(--ast-global-color-5)","background-image":"","background-repeat":"repeat","background-position":"center center","background-size":"auto","background-attachment":"scroll","background-type":"","background-media":"","overlay-type":"","overlay-color":"","overlay-opacity":"","overlay-gradient":""}},"footnotes":""},"categories":[67,58,14],"tags":[61,20,19],"uagb_featured_image_src":{"full":["https:\/\/specmatic.dvox.biz\/wp-content\/uploads\/2024\/04\/Google_PubSub.jpg",1920,1080,false],"thumbnail":["https:\/\/specmatic.dvox.biz\/wp-content\/uploads\/2024\/04\/Google_PubSub-150x150.jpg",150,150,true],"medium":["https:\/\/specmatic.dvox.biz\/wp-content\/uploads\/2024\/04\/Google_PubSub-300x169.jpg",300,169,true],"medium_large":["https:\/\/specmatic.dvox.biz\/wp-content\/uploads\/2024\/04\/Google_PubSub-768x432.jpg",768,432,true],"large":["https:\/\/specmatic.dvox.biz\/wp-content\/uploads\/2024\/04\/Google_PubSub-1024x576.jpg",1024,576,true],"1536x1536":["https:\/\/specmatic.dvox.biz\/wp-content\/uploads\/2024\/04\/Google_PubSub-1536x864.jpg",1536,864,true],"2048x2048":["https:\/\/specmatic.dvox.biz\/wp-content\/uploads\/2024\/04\/Google_PubSub.jpg",1920,1080,false]},"uagb_author_info":{"display_name":"Yogesh Nikam","author_link":"https:\/\/specmatic.dvox.biz\/author\/yogesh\/"},"uagb_comment_info":0,"uagb_excerpt":"Shift-Left the identification of integration issues in applications built with Event Driven Architecture (EDA) by leveraging AsyncAPI specs as Executable Contracts Introduction The surge in popularity of microservices has revolutionized the way we think about software architecture. However, as systems grow and inter-service communication increases, the risk of integration issues can also rise. One such&hellip;","_links":{"self":[{"href":"https:\/\/specmatic.dvox.biz\/wp-json\/wp\/v2\/posts\/4576"}],"collection":[{"href":"https:\/\/specmatic.dvox.biz\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/specmatic.dvox.biz\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/specmatic.dvox.biz\/wp-json\/wp\/v2\/users\/9"}],"replies":[{"embeddable":true,"href":"https:\/\/specmatic.dvox.biz\/wp-json\/wp\/v2\/comments?post=4576"}],"version-history":[{"count":7,"href":"https:\/\/specmatic.dvox.biz\/wp-json\/wp\/v2\/posts\/4576\/revisions"}],"predecessor-version":[{"id":4586,"href":"https:\/\/specmatic.dvox.biz\/wp-json\/wp\/v2\/posts\/4576\/revisions\/4586"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/specmatic.dvox.biz\/wp-json\/wp\/v2\/media\/4577"}],"wp:attachment":[{"href":"https:\/\/specmatic.dvox.biz\/wp-json\/wp\/v2\/media?parent=4576"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/specmatic.dvox.biz\/wp-json\/wp\/v2\/categories?post=4576"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/specmatic.dvox.biz\/wp-json\/wp\/v2\/tags?post=4576"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}